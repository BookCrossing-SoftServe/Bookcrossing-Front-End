<div>
  <form
    [formGroup]="addBookForm"
    (ngSubmit)="onSubmit()"
    class="text-center border border-light p-5"
  >
    <p class="h3 mb-4 title">Register book</p>
    <div>
    <div class="form-row mb-4">
      <div class="col-3">
        <p class="h5 input-label">Book title:</p>
      </div>
      <div class="col-4">
        <!-- Book title -->
        <input
          formControlName="title"
          type="text"
          class="form-control"
          placeholder="Color of magic"
          required
        />
      </div>
    </div>

    <!-- Author -->
    <div class="form-row mb-4">
      <div class="col-3">
        <p class="h5 input-label">Author:</p>
      </div>
      <div class="col-4">
        <input
          type="text"
          class="form-control"
          [matAutocomplete]="auto"
          placeholder="Terry Pratchett"
        />
      </div>
    </div>
    <mat-autocomplete #auto="matAutocomplete">
      <mat-option *ngFor="let author of filteredAuthors | async" [value]="author.id">
        {{author.name+" "+author.middlename+" "+author.lastname}}
      </mat-option>
    </mat-autocomplete>

      <div class="form-row mb-4">
        <div class="col-3">
          <p class="h5 input-label">Category:</p>
        </div>
        <!-- Select multiple genres -->
        <div class="col-4">
          <mat-select
            formControlName="genres"
            class="form-control"
            multiple
            placeholder="Select"
            required
          >
            <mat-select-trigger>
              {{
                addBookForm.get("genres").value
                  ? getGenreById(addBookForm.get("genres").value[0])
                  : ""
              }}
              <span
                *ngIf="addBookForm.get('genres').value?.length > 1"
                class="additional-selection"
              >
                (+{{ addBookForm.get("genres").value.length - 1 }}
                {{
                  addBookForm.get("genres").value.length === 2
                    ? "other"
                    : "others"
                }})
              </span>
            </mat-select-trigger>
            <mat-option *ngFor="let genre of genres" [value]="genre.id">{{
              genre.name
            }}</mat-option>
          </mat-select>
        </div>
      </div>

      <div class="form-row mb-4">
        <div class="col-3">
          <p class="h5 input-label">Publishing house:</p>
        </div>
        <div class="col-4">
          <input
            formControlName="publisher"
            type="text"
            class="form-control"
            placeholder="Machaon"
          />
        </div>
      </div>
    
      <div class="form-row mb-4">
        <div class="col-3">
          <p class="h5 input-label">Notice:</p>
        </div>
        <div class="col-4">
          <textarea
            type="text"
            class="form-control"
            placeholder=""
          ></textarea>
        </div>
      </div>

      <div class="form-row mb-4">
        <div class="col-3">
          <p class="h5 input-label">Image:</p>
        </div>
        <div class="col-4">
          <div class="file-upload-wrapper">
          <input
            type="file"
            class=" file-upload"
          >
          </div>
        </div>
      </div>
    </div>

    <!-- old Authors -->
    <!-- <div class="row">
      <div class="col mb-4">
        <app-authors
          (selectRow)="addAuthor($event)"
          [isAdmin]="false"
        ></app-authors>
      </div>
      <div class="col mb-4">
        <div class="container my-5">
          <button
            *ngIf="!addNewAuthor"
            (click)="addNewAuthor = true"
            class="btn btn-md btn-outline-default m-0 px-3 py-2 z-depth-0 waves-effect"
          >
            Add new author
          </button>
        </div>
        <div
          *ngIf="addNewAuthor"
          class="input-group container my-5"
          [formGroup]="authorControl"
        >
          <input
            formControlName="firstName"
            type="text"
            class="form-control"
            placeholder="Firstname"
          />
          <input
            formControlName="middleName"
            type="text"
            class="form-control"
            placeholder="Middlename"
          />
          <input
            formControlName="lastName"
            type="text"
            class="form-control"
            placeholder="Lastname"
          />
          <div class="input-group-append">
            <button
              class="btn btn-md btn-outline-default m-0 px-3 py-2 z-depth-0 waves-effect"
              type="button"
              [disabled]="authorControl.invalid"
              (click)="onAddAuthor()"
            >
              Add author
            </button>
          </div>
        </div>
        <div>
          <ul class="list-group authors-list">
            <li *ngFor="let author of selectedAuthors" class="list-group-item">
              <span>{{
                author.firstName +
                  " " +
                  author.middleName +
                  "  " +
                  author.lastName
              }}</span>
              <button
                class="btn btn-md btn-outline-danger m-0 px-3 py-2 z-depth-0 waves-effect"
                (click)="onDeleteAuthor(author)"
              >
                Delete
              </button>
            </li>
          </ul>
        </div>
      </div>
    </div> -->

    <button
      class="btn btn-info"
    
    >
    Add image
    </button>
    <!-- Add book button -->
    <button
      class="btn btn-info"
      type="submit"
      
    >
    <!-- [disabled]="addBookForm.invalid || selectedAuthors.length === 0" -->
      Submit
    </button>
  </form>
</div>
